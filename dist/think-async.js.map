{"version":3,"sources":["../src/think-async.js"],"names":["ThinkAsync","scripts","id","url","callback","async","asyncId","doc","document","getElementById","loaded","js","createElement","src","addEventListener","constructor","call","apply","triggered","getElementsByTagName","appendChild","Async"],"mappings":";;;;;;IAAMA,U;AACF,8BAAc;AAAA;;AACV,qBAAKC,OAAL,GAAe,EAAf;AACH;;;;oCACGC,E,EAAIC,G,EAAKC,Q,EAAU;;AAEnB,4BAAIC,QAAQ,IAAZ;AAAA,4BACIC,UAAUJ,KAAG,KADjB;AAAA,4BAEIK,MAAMC,QAFV;;AAKA;AACA,4BAAID,IAAIE,cAAJ,CAAmBH,OAAnB,CAAJ,EAAiC;AAAED,sCAAMJ,OAAN,CAAcC,EAAd,EAAkBQ,MAAlB,GAA2B,IAA3B,CAAiC;AAAS;;AAE7EL,8BAAMJ,OAAN,CAAcK,OAAd,IAAyB;AACjB,uCAAOH,GADU;AAEjB,sCAAMD,EAFW;AAGjB,4CAAYE,QAHK;AAIjB,0CAAU,KAJO;AAKjB,6CAAa;AALI,yBAAzB;;AAQA,4BAAIO,KAAKJ,IAAIK,aAAJ,CAAkB,QAAlB,CAAT;;AAEAD,2BAAGE,GAAH,GAASV,GAAT;AACAQ,2BAAGN,KAAH,GAAW,OAAX;AACAH,+BAAOS,GAAGT,EAAH,GAAQI,OAAf;;AAEA;;AAEAK,2BAAGG,gBAAH,CAAoB,MAApB,EAA4B,YAAW;AACnCT,sCAAMJ,OAAN,CAAcK,OAAd,EAAuBI,MAAvB,GAAgC,IAAhC;AACA,oCAAG,CAAC,EAAEN,YAAYA,SAASW,WAArB,IAAoCX,SAASY,IAA7C,IAAqDZ,SAASa,KAAhE,CAAJ,EAA4E;AACxEZ,8CAAMJ,OAAN,CAAcK,OAAd,EAAuBY,SAAvB,GAAmC,IAAnC;AACAd,iDAASO,EAAT,EAAa,CAACL,OAAD,CAAb;AACH;AACJ,yBAND;;AAQAE,iCAASW,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,WAAzC,CAAqDT,EAArD;AAEH;;;;;;AAIL,IAAIU,QAAQ,IAAIrB,UAAJ,EAAZ","file":"think-async.js","sourcesContent":["class ThinkAsync {\r\n    constructor() {\r\n        this.scripts = {};\r\n    }\r\n    add(id, url, callback) {\r\n\r\n        let async = this,\r\n            asyncId = id+'-js',\r\n            doc = document;\r\n\r\n\r\n        // If script is present on the page, there is nothing to do here.\r\n        if (doc.getElementById(asyncId)) { async.scripts[id].loaded = true; return; }\r\n\r\n        async.scripts[asyncId] = {\r\n                \"url\": url,\r\n                \"id\": id,\r\n                \"callback\": callback,\r\n                \"loaded\": false,\r\n                \"triggered\": false\r\n        };\r\n\r\n        let js = doc.createElement('script');\r\n\r\n        js.src = url;\r\n        js.async = \"async\";\r\n        id && (js.id = asyncId);\r\n\r\n        // Do callback, using underscore function check\r\n\r\n        js.addEventListener('load', function() {\r\n            async.scripts[asyncId].loaded = true;\r\n            if(!!(callback && callback.constructor && callback.call && callback.apply)) {\r\n                async.scripts[asyncId].triggered = true;\r\n                callback(js, [asyncId]);\r\n            }\r\n        });\r\n\r\n        document.getElementsByTagName('head')[0].appendChild(js);\r\n\r\n    };\r\n\r\n}\r\n\r\nlet Async = new ThinkAsync();"]}